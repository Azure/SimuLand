
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Create a Certificate Signing Request and Get a Trusted CA Signed SSL Certificate &#8212; SimuLand</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=62ba249389abaaa9ffc34bf36a076bdc1d65ee18" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=f31d14ad54b65d19161ba51d4ffff3a77ae00456"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="canonical" href="https://simulandlabs.com/environments/_helper-docs/getTrustedCASignedSSLCertificate.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Microsoft 365 Tenant: Get an Azure Subscription" href="m365TenantGetAzSubscription.html" />
    <link rel="prev" title="Enable Office 365 Audit Log Search" href="enableOffice365AuditLogSearch.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">SimuLand</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Lab Environments
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="README.html">
   Helper Docs
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="addDomainToM365.html">
     Add Domain to Microsoft 365 Tenant
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="addM365LicenseToUser.html">
     Add Microsoft 365 E5 License to User
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="assignAADRole.html">
     Assign Azure AD Role to User
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="configureAADConnectADFS.html">
     Configure Azure AD Connect: ADFS
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="configureAADConnectPTA.html">
     Configure Azure AD Connect: Pass-through Authentication
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="configureM365Defender.html">
     Initialize Microsoft 365 Defenders Security Products Configurations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="connectAzVmAzBastion.html">
     Connect to Azure VM via Azure Bastion
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="createPrivateContainerUploadFile.html">
     Create an Azure Storage Account and Host a Private File in a Private Container
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="disableAzureADFederation.html">
     Disable Azure Active Directory (AD) Federation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="enableMultiFactorAuthentication.html">
     Enable Multi-Factor Authentication
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="enableOffice365AuditLogSearch.html">
     Enable Office 365 Audit Log Search
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Create a Certificate Signing Request and Get a Trusted CA Signed SSL Certificate
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="m365TenantGetAzSubscription.html">
     Microsoft 365 Tenant: Get an Azure Subscription
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="registerAADAppAndSP.html">
     Register Azure AD Application and Create App Service Principal
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="startM365E5Trial.html">
     Start Microsoft 365 E5 Trial
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../README.html">
   Lab Environments
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../aadHybridIdentityADFS/README.html">
     AAD Hybrid Identity: AD FS Environment
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Lab Guides
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../labs/README.html">
   All Labs
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../labs/GoldenSAML/README.html">
   Golden SAML
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../labs/GoldenSAML/simulation/export-adfs-configuration/README.html">
     Export AD FS Configuration
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
    <label for="toctree-checkbox-4">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../labs/GoldenSAML/simulation/export-adfs-configuration/exportADFSConfigLocalNamedPipe.html">
       Export AD FS Configuration via a Local Named Pipe
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../labs/GoldenSAML/simulation/export-adfs-configuration/exportADFSConfigWCFPolicyStore.html">
       Export AD FS Configuration via Policy Store Transfer Service
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../labs/GoldenSAML/simulation/export-adfs-configuration/exportADFSConfigDotNETReflection.html">
       Export AD FS Configuration via .NET Reflection
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../labs/GoldenSAML/simulation/export-adfs-dkm-key/README.html">
     Export AD FS DKM Master Key
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
    <label for="toctree-checkbox-5">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../labs/GoldenSAML/simulation/export-adfs-dkm-key/exportADFSDKMKeyLDAP.html">
       Export AD FS DKM Master Key via LDAP Queries
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../labs/GoldenSAML/simulation/export-adfs-dkm-key/exportADFSDKMKeyDRS.html">
       Export AD FS DKM Master Key via Directory Replication Services
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../labs/GoldenSAML/simulation/export-adfs-certificates/README.html">
     Export AD FS Certificates
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
    <label for="toctree-checkbox-6">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../labs/GoldenSAML/simulation/export-adfs-certificates/exportADFSCertsDKMKey.html">
       Export AD FS Certificates via DKM Master Key
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../labs/GoldenSAML/simulation/sign-new-samltoken/README.html">
     Forge SAML Tokens
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../labs/GoldenSAML/simulation/get-oauth-accesstoken/README.html">
     Get OAuth Access Token with SAML Assertion
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../labs/GoldenSAML/simulation/read-mail-messages/README.html">
     Read Mail Messages via MS Graph APIs
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/Azure/SimuLand"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/Azure/SimuLand/issues/new?title=Issue%20on%20page%20%2Fenvironments/_helper-docs/getTrustedCASignedSSLCertificate.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../../_sources/environments/_helper-docs/getTrustedCASignedSSLCertificate.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pre-requirements">
   Pre-requirements:
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#main-steps">
   Main Steps
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-a-certificate-signing-request-csr-file">
   1. Create a Certificate Signing Request (.CSR) File
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#import-powershell-module">
     Import PowerShell Module
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#create-a-csr-file">
     Create a .CSR File
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#buy-an-ssl-certificate">
   2. Buy an SSL Certificate
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#activate-ssl-certificate">
   3. Activate SSL certificate
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#install-certificate">
   4. Install Certificate
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#export-certificate-and-private-key-pfx-format">
   5. Export Certificate and Private Key (.PFX Format)
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Create a Certificate Signing Request and Get a Trusted CA Signed SSL Certificate</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pre-requirements">
   Pre-requirements:
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#main-steps">
   Main Steps
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-a-certificate-signing-request-csr-file">
   1. Create a Certificate Signing Request (.CSR) File
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#import-powershell-module">
     Import PowerShell Module
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#create-a-csr-file">
     Create a .CSR File
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#buy-an-ssl-certificate">
   2. Buy an SSL Certificate
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#activate-ssl-certificate">
   3. Activate SSL certificate
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#install-certificate">
   4. Install Certificate
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#export-certificate-and-private-key-pfx-format">
   5. Export Certificate and Private Key (.PFX Format)
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="create-a-certificate-signing-request-and-get-a-trusted-ca-signed-ssl-certificate">
<h1>Create a Certificate Signing Request and Get a Trusted CA Signed SSL Certificate<a class="headerlink" href="#create-a-certificate-signing-request-and-get-a-trusted-ca-signed-ssl-certificate" title="Permalink to this headline">#</a></h1>
<p>Simulating a federated trust between an “on-prem” environment and a Microsoft 365 Azure AD tenant requires an Active Directory Federation Services (AD FS) server with a trusted CA Signed SSL Certificate.
This guide will show you how to get a trusted CA signed SSL certificate all the way from creating the certificate signing request (CSR) to the activation, installation and export of the new certificate.</p>
<div class="section" id="pre-requirements">
<h2>Pre-requirements:<a class="headerlink" href="#pre-requirements" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>A registered valid domain name</p></li>
</ul>
</div>
<div class="section" id="main-steps">
<h2>Main Steps<a class="headerlink" href="#main-steps" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Create a certificate signing request (.csr) file.</p></li>
<li><p>Buy an SSL Certificate.</p></li>
<li><p>Activate SSL certificate. Here is where you would use the .csr file.</p></li>
<li><p>Download and install trusted SSL certificate</p></li>
<li><p>Export certificate and private keys as a .pfx file</p></li>
</ul>
</div>
<div class="section" id="create-a-certificate-signing-request-csr-file">
<h2>1. Create a Certificate Signing Request (.CSR) File<a class="headerlink" href="#create-a-certificate-signing-request-csr-file" title="Permalink to this headline">#</a></h2>
<p>A certificate signing request (CSR) is a block of encoded text that is given to a Certificate Authority when applying for an SSL Certificate.</p>
<p>For this step, we are going to use the following <a class="reference external" href="https://github.com/OTRF/Blacksmith/blob/master/resources/scripts/powershell/misc/Get-CertSigningReq.ps1">PowerShell script</a> to generate a .csr file. You would usually execute that script on the server where you would install the new trusted certificate. However, since we have not deployed the active directory environment yet, we can do it on a separate local system. We can then install and export it from that computer to use it while deploying an AD FS server.</p>
<div class="section" id="import-powershell-module">
<h3>Import PowerShell Module<a class="headerlink" href="#import-powershell-module" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>Log on to a Windows box and open PowerShell as Administrator</p></li>
<li><p>Download and import the following module directly from GitHub</p></li>
</ul>
<div class="highlight-PowerShell notranslate"><div class="highlight"><pre><span></span>$uri = &#39;https://raw.githubusercontent.com/OTRF/Blacksmith/master/resources/scripts/powershell/misc/Get-CertSigningReq.ps1&#39;
$CertSigningReq = Invoke-WebRequest $uri –UseBasicParsing
Invoke-Expression $($CertSigningReq.Content)
</pre></div>
</div>
<p><img alt="" src="../../_images/2021-05-14_01_import_powershell_module.png" /></p>
</div>
<div class="section" id="create-a-csr-file">
<h3>Create a .CSR File<a class="headerlink" href="#create-a-csr-file" title="Permalink to this headline">#</a></h3>
<p>In this guide, we create a request for a Positive SSL Wildcard (multidomain) certificate. Therefore, when creating the .csr file, we set a * wildcard as a prefix of the custom domain (i.e. *.yourdomain.com) for the Subject Common Name property of the request.</p>
<div class="highlight-PowerShell notranslate"><div class="highlight"><pre><span></span><span class="nb">Get-CertSigningReq</span> <span class="n">-FriendlyName</span> <span class="s2">&quot;*.yourdomain.com site certificate&quot;</span> 
<span class="n">-Description</span> <span class="s2">&quot;ADFS yourdomain.com certificate&quot;</span> <span class="p">`</span>
<span class="n">-SubjectCommonName</span> <span class="s2">&quot;*.yourdomain.com&quot;</span> <span class="p">`</span>
<span class="n">-SubjectOrganizationUnit</span> <span class="s2">&quot;Research&quot;</span> <span class="p">`</span>
<span class="n">-SubjectOrganization</span> <span class="s2">&quot;yourdomain.com&quot;</span> <span class="p">`</span>
<span class="n">-SubjectCountry</span> <span class="s2">&quot;US&quot;</span> <span class="p">`</span>
<span class="n">-SubjectState</span> <span class="s2">&quot;PA&quot;</span> <span class="p">`</span>
<span class="n">-SubjectLocality</span> <span class="s2">&quot;PA&quot;</span> <span class="p">`</span>
<span class="n">-CertFilePath</span> <span class="s2">&quot;Request.csr&quot;</span>
</pre></div>
</div>
<p><img alt="" src="../../_images/2021-05-14_02_create_csr_file.png" /></p>
<p>Copy the contents of the .csr file and get ready to use it during the activation process of your new SSL certificate.</p>
<div class="highlight-PowerShell notranslate"><div class="highlight"><pre><span></span><span class="nb">get-content</span> <span class="p">.\</span><span class="n">Request</span><span class="p">.</span><span class="n">csr</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="buy-an-ssl-certificate">
<h2>2. Buy an SSL Certificate<a class="headerlink" href="#buy-an-ssl-certificate" title="Permalink to this headline">#</a></h2>
<p>For this document, we bought ours from <a class="reference external" href="http://namecheap.com">namecheap.com</a>. In the previous step, we created a request for a PositiveSSL Wildcard certificate to secure multiple domains from one (i.e *.mydomain.com). Here are all the other options you have: <a class="reference external" href="https://www.namecheap.com/security/ssl-certificates/">https://www.namecheap.com/security/ssl-certificates/</a></p>
<p>Once you purchase your certificate, you should be ready to activate it and attach it to your domain.</p>
<p><img alt="" src="../../_images/2021-05-14_03_namecheap_certificate.png" /></p>
<p>If you want to validate your base64 encoded CSR blob, you can do it with this tool provided by namecheap called <a class="reference external" href="https://decoder.link/result">Decoder</a>.</p>
</div>
<div class="section" id="activate-ssl-certificate">
<h2>3. Activate SSL certificate<a class="headerlink" href="#activate-ssl-certificate" title="Permalink to this headline">#</a></h2>
<p>Click on the <code class="docutils literal notranslate"><span class="pre">Activate</span></code> button shown in the previous image and enter the contents of your .csr file.</p>
<p><img alt="" src="../../_images/2021-05-14_04_namecheap_activate_certificate.png" /></p>
<p>You need to confirm that you own the domain which you requested the SSL certificate for. When you get to that step you will have a few options:</p>
<ul class="simple">
<li><p>Add CNAME record: A validation CNAME record should be added to the DNS settings of your domain name. They are usually managed by your domain registrar or hosting provider.</p></li>
<li><p>Receive an email: An email with a validation link will be sent to a predefined list of email addresses related to your domain name.</p></li>
<li><p>Upload a validation file: The file is obtained from the CA once you submit an activation request. You will be able to download it from your account when the SSL’s status switches to <code class="docutils literal notranslate"><span class="pre">Pending</span></code>.</p></li>
</ul>
<p><img alt="" src="../../_images/2021-05-14_05_namecheap_confirm_certificate_add_cname.png" /></p>
<p><img alt="" src="../../_images/2021-05-14_06_namecheap_review_activate.png" /></p>
</div>
<div class="section" id="install-certificate">
<h2>4. Install Certificate<a class="headerlink" href="#install-certificate" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Download Certificate</p></li>
<li><p>Log on to the computer where you created the .csr file and pen PowerShell as Administrator</p></li>
<li><p>Install the new SSL certificate (.cer or .crt files provided by your trusted provider)</p></li>
</ul>
<div class="highlight-PowerShell notranslate"><div class="highlight"><pre><span></span><span class="nv">$CertFile</span> <span class="p">=</span> <span class="nb">Get-Item</span> <span class="n">-Path</span> <span class="n">NewSSLCert</span><span class="p">.</span><span class="n">cer</span>

<span class="nb">Import-Certificate</span> <span class="n">-FilePath</span> <span class="nv">$CertFile</span><span class="p">.</span><span class="n">FullName</span> <span class="n">-CertStoreLocation</span> <span class="s2">&quot;cert:\LocalMachine\My&quot;</span>
</pre></div>
</div>
<p><img alt="" src="../../_images/2021-05-14_07_install_certificate.png" /></p>
</div>
<div class="section" id="export-certificate-and-private-key-pfx-format">
<h2>5. Export Certificate and Private Key (.PFX Format)<a class="headerlink" href="#export-certificate-and-private-key-pfx-format" title="Permalink to this headline">#</a></h2>
<p>The password that you use to export the certificate will be the same password that you will use to import the certificate file to other servers.</p>
<div class="highlight-PowerShell notranslate"><div class="highlight"><pre><span></span>$Cert = Get-ChildItem -Path &quot;cert:\LocalMachine\My\&quot; -DnsName &quot;yourdomain.com&quot;

Export-PfxCertificate -FilePath C:\ADFS.PFX -Cert $Cert -Password (ConvertTo-SecureString ‘YOURPASSWORD’ -AsPlainText -Force)
</pre></div>
</div>
<p><img alt="" src="../../_images/2021-05-14_08_export_cetificate_pfx.png" /></p>
<p>You are now ready to use that certificate while deploying an AD FS server.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./environments\_helper-docs"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="enableOffice365AuditLogSearch.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Enable Office 365 Audit Log Search</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="m365TenantGetAzSubscription.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Microsoft 365 Tenant: Get an Azure Subscription</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Microsoft Corporation<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>